System.register("chunks:///_virtual/arrayExt.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t("flatten",(function(t){return t.reduce((function(t,e){return t.concat(e)}),[])})),e._RF.push({},"5c883eAe95NT5dTsEdJkSTe","arrayExt",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/bomb.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bounds.ts"],(function(i){var t,n,e,s;return{setters:[function(i){t=i.createClass},function(i){n=i.cclegacy,e=i.Vec2},function(i){s=i.vec2InBounds}],execute:function(){n._RF.push({},"141a6BsoHxK7ashEJRrI/OT","bomb",void 0);i("Bomb",function(){function i(i,t){this._grid=void 0,this._radius=void 0,this._name="Bomb",this._grid=i,this._radius=t}return i.prototype.fromPoint=function(i){if(!s(i,e.ZERO,this._grid.size))return[];for(var t=[i],n=[i],r=this._grid.getTileNeighbors(this._grid.tiles[i.x][i.y]).map((function(i){return i.position}));r.length>0;){var o=r.shift();if(-1===t.indexOf(o)&&(t.push(o),!(new e(i.x-o.x,i.y-o.y).length()>this._radius))){n.push(o);var u=this._grid.getTileNeighbors(this._grid.tiles[o.x][o.y]).map((function(i){return i.position}));r.push.apply(r,u)}}return n},t(i,[{key:"title",get:function(){return this._name}}]),i}());n._RF.pop()}}}));

System.register("chunks:///_virtual/boostView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,i,r,n,l,s,a,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,s=e.Sprite,a=e.Label,c=e.Component,u=e.Color}],execute:function(){var p,f,d,b,h,w,y;n._RF.push({},"9f6b1nJSFhMQ6GifiwPUwIG","boostView",void 0);var C=l.ccclass,g=l.property;e("BoostView",(p=C("boost-view"),f=g({type:s}),p((h=t((b=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,i(t,"sprite",h,r(t)),t._label=void 0,i(t,"defaultColor",w,r(t)),i(t,"selectedColor",y,r(t)),t}o(t,e);var n=t.prototype;return n.onLoad=function(){this._label=this.node.getComponentInChildren(a),this.deselected()},n.setText=function(e){this._label.string=e},n.selected=function(){this.sprite.color=this.selectedColor},n.deselected=function(){this.sprite.color=this.defaultColor},t}(c)).prototype,"sprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(b.prototype,"defaultColor",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),y=t(b.prototype,"selectedColor",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),d=b))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/bootstrapper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./tilesColorsConfig.ts","./gridView.ts","./grid.ts","./clearer.ts","./coreState.ts","./stateMachine2.ts","./pool.ts","./tile.ts","./filler.ts","./random.ts","./shuffler.ts","./tilesSelector.ts","./gridEventsInterpreter.ts","./gridViewUpdater.ts","./idleStateResolver.ts","./clearStateResolver.ts","./fillStateResolver.ts","./shuffleStateResolver.ts","./tileClickInterpreter.ts","./clearCommand.ts","./fillCommand.ts","./shuffleCommand.ts","./tileSlotView.ts","./tileView.ts","./viewClearer.ts","./viewFiller.ts","./viewShuffler.ts","./score.ts","./clearScorer.ts","./turns.ts","./loseStateResolver.ts","./winLoseScreensSwitcher.ts","./winStateResolver.ts","./scoreView.ts","./connected.ts","./selector.ts","./clearBoostsSelector.ts","./bomb.ts","./clearBoostsSelectorView.ts","./turnsView.ts"],(function(e){var t,i,r,n,o,l,s,a,c,u,f,w,p,h,S,b,d,g,v,m,V,C,y,_,I,R,T,z,E,B,L,P,M,D,G,F,x,k,W,A,J,O,U,H,K,j,q,N,Y,Q,X;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,s=e.EventTarget,a=e.JsonAsset,c=e.Prefab,u=e.Component,f=e.instantiate},function(e){w=e.TILES_COLORS_CONFIG},function(e){p=e.GridView},function(e){h=e.Grid},function(e){S=e.Clearer},function(e){b=e.CoreState},function(e){d=e.CoreStateMachine},function(e){g=e.Pool},function(e){v=e.Tile},function(e){m=e.Filler},function(e){V=e.randomInteger},function(e){C=e.Shuffler},function(e){y=e.TilesSelector},function(e){_=e.GridEventsInterpreter},function(e){I=e.GridViewUpdater},function(e){R=e.IdleStateResolver},function(e){T=e.ClearStateResolver},function(e){z=e.FillStateResolver},function(e){E=e.ShuffleStateResolver},function(e){B=e.TileClickInterpreter},function(e){L=e.GRIDVIEW_CLEARED_ET},function(e){P=e.GRIDVIEW_FILLED_ET},function(e){M=e.GRIDVIEW_SHUFFLED_ET},function(e){D=e.TileSlotView},function(e){G=e.TileView},function(e){F=e.ViewClearer},function(e){x=e.ViewFiller},function(e){k=e.ViewShuffler},function(e){W=e.Score},function(e){A=e.ClearScorer},function(e){J=e.Turns},function(e){O=e.LoseStateResolver},function(e){U=e.WinLoseScreensSwitcher},function(e){H=e.WinStateResolver},function(e){K=e.ScoreView},function(e){j=e.Connected},function(e){q=e.Selector},function(e){N=e.ClearBoostsSelector},function(e){Y=e.Bomb},function(e){Q=e.ClearBoostsSelectorView},function(e){X=e.TurnsView}],execute:function(){var Z,$,ee,te,ie,re,ne,oe,le,se,ae,ce,ue,fe,we,pe,he,Se,be,de,ge,ve,me,Ve,Ce,ye,_e,Ie,Re,Te;o._RF.push({},"20a9aK7Wu1LO526Ks4odqGm","bootstrapper",void 0);var ze=l.ccclass,Ee=l.property,Be=e("GAME_READY_ET",new s);e("Bootstrapper",(Z=ze("bootstrapper"),$=Ee({type:a}),ee=Ee({type:p}),te=Ee({type:D}),ie=Ee({type:c}),re=Ee({type:c}),ne=Ee({type:Q}),oe=Ee({type:K}),le=Ee({type:X}),se=Ee({type:U}),Z((ue=t((ce=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,r(t,"tileSpritesJson",ue,n(t)),r(t,"turnsCount",fe,n(t)),r(t,"scoreTarget",we,n(t)),r(t,"gridSize",pe,n(t)),r(t,"gridMinBlastSize",he,n(t)),r(t,"gridTilesColorVariantsCount",Se,n(t)),r(t,"maxShufflesPerIterationCount",be,n(t)),r(t,"bombBoostRadius",de,n(t)),r(t,"gridView",ge,n(t)),r(t,"tilesSpawnSlot",ve,n(t)),r(t,"tileSlotViewPrefab",me,n(t)),r(t,"tileViewPrefab",Ve,n(t)),r(t,"fallShiftTime",Ce,n(t)),r(t,"shuffleShiftTime",ye,n(t)),r(t,"clearBoostsSelectorView",_e,n(t)),r(t,"scoreView",Ie,n(t)),r(t,"turnsView",Re,n(t)),r(t,"winLoseScreensSwitcher",Te,n(t)),t._stateMachine=void 0,t._stateResolvers=[],t._clearScorer=void 0,t._tileClicksInterpreter=void 0,t._gridEventsInterpreter=void 0,t}i(t,e);var o=t.prototype;return o.start=function(){var e=this;Promise.all([w.load(this.tileSpritesJson)]).then((function(){e.init(),e.bind(),e.launch(),Be.emit(0)})).catch((function(e){console.error(e),console.error("Failed to load the Game (Please check the console to resolve errors)"),Be.emit(1)}))},o.onDestroy=function(){this.expose()},o.init=function(){var e,t=this;this._stateMachine=new d(b.IDLE);var i=new W(this.scoreTarget);this.scoreView.init(i.value,i.target);var r=new J(this.turnsCount);this.turnsView.init(r.left);var n=new g((function(){return new v}),(function(e){return e.paint(V(1,t.gridTilesColorVariantsCount))}),(function(){})),o=new h(n,this.gridSize,this.gridMinBlastSize,this.gridTilesColorVariantsCount),l=new y,s=new q,a=new j(o),c=new S(o,n),u=new m(o,n),w=new C(o),p=new N,U=[new Y(o,this.bombBoostRadius)];this._clearScorer=new A(i);var K=new g((function(){return f(t.tileSlotViewPrefab).getComponent(D)}),(function(e){return e.node.active=!0}),(function(e){return e.node.active=!1})),Q=new g((function(){return f(t.tileViewPrefab).getComponent(G)}),(function(e){return e.node.active=!0}),(function(e){return e.node.active=!1}));this.gridView.init(K,Q,this.tilesSpawnSlot),this.gridView.initGrid(o),this._tileClicksInterpreter=new B(l);var X=new F(this.gridView,Q),Z=new x(this.gridView,Q,this.tilesSpawnSlot,this.fallShiftTime),$=new k(this.gridView,this.shuffleShiftTime),ee=new I;this._gridEventsInterpreter=new _(X,Z,$,ee),this.clearBoostsSelectorView.init(p),this.clearBoostsSelectorView.initBoosts(U),(e=this._stateResolvers).push.apply(e,[new R(this._stateMachine,l,s,a,p,i,r),new T(this._stateMachine,l,c,L),new z(this._stateMachine,u,P),new E(this._stateMachine,w,a,M,this.maxShufflesPerIterationCount),new O(this.winLoseScreensSwitcher),new H(this.winLoseScreensSwitcher)])},o.bind=function(){this._stateResolvers.forEach((function(e){return e.bind()})),this._clearScorer.bind(),this._tileClicksInterpreter.bind(),this._gridEventsInterpreter.bind()},o.expose=function(){this._stateResolvers.forEach((function(e){return e.expose()})),this._clearScorer.expose(),this._tileClicksInterpreter.expose(),this._gridEventsInterpreter.expose()},o.launch=function(){this._stateMachine.start()},t}(u)).prototype,"tileSpritesJson",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=t(ce.prototype,"turnsCount",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),we=t(ce.prototype,"scoreTarget",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),pe=t(ce.prototype,"gridSize",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(ce.prototype,"gridMinBlastSize",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),Se=t(ce.prototype,"gridTilesColorVariantsCount",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),be=t(ce.prototype,"maxShufflesPerIterationCount",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),de=t(ce.prototype,"bombBoostRadius",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),ge=t(ce.prototype,"gridView",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=t(ce.prototype,"tilesSpawnSlot",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=t(ce.prototype,"tileSlotViewPrefab",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ve=t(ce.prototype,"tileViewPrefab",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=t(ce.prototype,"fallShiftTime",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),ye=t(ce.prototype,"shuffleShiftTime",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),_e=t(ce.prototype,"clearBoostsSelectorView",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=t(ce.prototype,"scoreView",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=t(ce.prototype,"turnsView",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=t(ce.prototype,"winLoseScreensSwitcher",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=ce))||ae));o._RF.pop()}}}));

System.register("chunks:///_virtual/bounds.ts",["cc"],(function(n){var u;return{setters:[function(n){u=n.cclegacy}],execute:function(){n({numberInBounds:function(n,u,t){return n>=u&&n<=t},vec2InBounds:function(n,u,t){return n.x>=u.x&&n.y>=u.y&&n.x<=t.x&&n.y<=t.y}}),u._RF.push({},"91808RkIwBCgLG84/QPU/bG","bounds",void 0),u._RF.pop()}}}));

System.register("chunks:///_virtual/clearBoostsSelector.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,s;return{setters:[function(t){e=t.createClass},function(t){o=t.cclegacy,s=t.EventTarget}],execute:function(){o._RF.push({},"5c69b5QKjNHRLfd7Saoq3Oq","clearBoostsSelector",void 0);var n=t("CLEAR_BOOST_SELECTED_ET",new s),c=t("CLEAR_BOOST_DESELECTED_ET",new s);t("ClearBoostsSelector",function(){function t(){this._boost=void 0}var o=t.prototype;return o.select=function(t){this.boost!=t&&(this.deselect(),this._boost=t,n.emit(0))},o.deselect=function(){null!=this.boost&&(this._boost=null,c.emit(0))},e(t,[{key:"boost",get:function(){return this._boost}},{key:"hasBoostSelected",get:function(){return null!=this._boost}}]),t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/clearBoostsSelectorView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./boostView.ts"],(function(t){var e,o,i,s,n,r,a,l,c,h,u,d,p,_,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized,n=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,a=t._decorator,l=t.Prefab,c=t.UITransform,h=t.Layout,u=t.Vec2,d=t.Size,p=t.Component,_=t.instantiate,f=t.Button},function(t){y=t.BoostView}],execute:function(){var b,w,g,v,S;r._RF.push({},"345d7gWjEFCyoXl9AcJRQNp","clearBoostsSelectorView",void 0);var B=a.ccclass,m=a.property;t("ClearBoostsSelectorView",(b=B("clear-boosts-selector-view"),w=m({type:l}),b((S=e((v=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,i(e,"boostViewPrefab",S,s(e)),e._transform=void 0,e._layout=void 0,e._boostViews=new Map,e._boostClickHandlers=new Map,e._clearBoostsSelector=void 0,e._initialized=!1,e}o(e,t);var r=e.prototype;return r.onLoad=function(){this._transform=this.node.getComponent(c),this._layout=this.node.getComponent(h)},r.init=function(t){this._clearBoostsSelector=t},r.initBoosts=function(t){var e=this;if(!this._initialized){var o=new u(this._layout.spacingX*t.length),i=Math.floor((this._transform.contentSize.y-o.y)/t.length),s=new u(o.x+i*t.length,o.y+i),r=new u((this._transform.contentSize.x-s.x)/2,(this._transform.contentSize.y-s.y)/2),a=new d(i,i);this._layout.cellSize=a,this._layout.paddingLeft=r.x,this._layout.paddingRight=r.x,this._layout.paddingTop=r.y,this._layout.paddingBottom=r.y;for(var l,c=function(){var t=l.value,o=_(e.boostViewPrefab).getComponent(y);e.node.addChild(o.node),o.setText(t.title),e._boostViews.set(t,o);var i=function(){return e.choose(t)};o.node.on(f.EventType.CLICK,i,e),e._boostClickHandlers.set(t,i)},h=n(t);!(l=h()).done;)c();this._initialized=!0}},r.choose=function(t){if(t==this._clearBoostsSelector.boost)return this._boostViews.get(this._clearBoostsSelector.boost).deselected(),void this._clearBoostsSelector.deselect();this._clearBoostsSelector.select(t),this._boostViews.get(this._clearBoostsSelector.boost).selected()},e}(p)).prototype,"boostViewPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=v))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/clearCommand.ts",["cc"],(function(e){var t,r;return{setters:[function(e){t=e.cclegacy,r=e.EventTarget}],execute:function(){t._RF.push({},"7d2f9Vzq41Dg6Ah0FRxfYvJ","clearCommand",void 0);var i=e("GRIDVIEW_CLEARED_ET",new r);e("ClearCommand",function(){function e(e,t){this._viewClearer=void 0,this._clearPositions=void 0,this._viewClearer=e,this._clearPositions=t}return e.prototype.do=function(){return this._viewClearer.clear(this._clearPositions).then((function(){return i.emit(0)}))},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/clearer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,i=e.EventTarget}],execute:function(){r._RF.push({},"5c0cbPosf1Lno8GFmbqSav4","clearer",void 0);var o=e("CLEAR_ET",new i);e("Clearer",function(){function e(e,t){this._grid=void 0,this._tilesPool=void 0,this._grid=e,this._tilesPool=t}return e.prototype.clear=function(e){if(e.length<this._grid.minBlastSize)return[];for(var r,i=t(e);!(r=i()).done;){var n=r.value,l=this._grid.tiles[n.x][n.y];this._grid.tiles[n.x][n.y]=null,this._tilesPool.put(l)}return o.emit(0,e),e},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/clearScorer.ts",["cc","./clearer.ts"],(function(r){var e,t;return{setters:[function(r){e=r.cclegacy},function(r){t=r.CLEAR_ET}],execute:function(){e._RF.push({},"d1694Kg44xDA5TQzWis9QW+","clearScorer",void 0);r("ClearScorer",function(){function r(r){this._scorer=void 0,this._scorer=r}var e=r.prototype;return e.bind=function(){t.on(0,this.scoreUp,this)},e.expose=function(){t.off(0,this.scoreUp,this)},e.scoreUp=function(r){this._scorer.scoreUp(Math.pow(2,r.length))},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/clearStateResolver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./stateMachine.ts","./coreState.ts","./stateMachine2.ts"],(function(t){var e,i,o,n,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){o=t.StateAction,n=t.AStateResolver},function(t){c=t.CoreState},function(t){r=t.CORE_STATE_SWITCH_ET}],execute:function(){i._RF.push({},"ad19aRq+F9Lp48M27X5NW+c","clearStateResolver",void 0);t("ClearStateResolver",function(t){function i(e,i,o,n){var s;return(s=t.call(this,r,c.CLEARING)||this)._stateMachine=void 0,s._tileSelector=void 0,s._clearer=void 0,s._toFillEt=void 0,s._stateMachine=e,s._tileSelector=i,s._clearer=o,s._toFillEt=n,s}e(i,t);var n=i.prototype;return n.toggle=function(t){switch(t){case o.ENTER:this.onEnter();break;case o.EXIT:this.onExit()}},n.onEnter=function(){this._toFillEt.once(0,this.toFill,this),this._clearer.clear(this._tileSelector.positions)},n.onExit=function(){},n.toFill=function(){this._stateMachine.switch(c.FILLING)},i}(n));i._RF.pop()}}}));

System.register("chunks:///_virtual/command.ts",["cc"],(function(){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"48d5eeIxQBFpLGIinAqKQwg","command",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/connected.ts",["cc","./bounds.ts"],(function(i){var t,n,o;return{setters:[function(i){t=i.cclegacy,n=i.Vec2},function(i){o=i.vec2InBounds}],execute:function(){t._RF.push({},"dd8c1V68KVFwb6CYoY7akXB","connected",void 0);i("Connected",function(){function i(i){this._grid=void 0,this._grid=i}var t=i.prototype;return t.fromPoint=function(i){if(!o(i,n.ZERO,this._grid.size))return[];for(var t=this._grid.tiles[i.x][i.y],e=[t.position],r=[t.position],s=this._grid.getTileNeighbors(t);s.length>0;){var c=s.pop();-1===e.indexOf(c.position)&&(e.push(c.position),c.color==t.color&&(r.push(c.position),s.push.apply(s,this._grid.getTileNeighbors(c))))}return r},t.hasAnythingConnected=function(){for(var i=0;i<this._grid.size.x;i++)for(var t=0;t<this._grid.size.y;t++)if(!(this.fromPoint(new n(i,t)).length<this._grid.minBlastSize))return!0;return!1},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/convertation.ts",["cc"],(function(c){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){c("convertLocalToOtherLocal",(function(c,e,t){var o=e.convertToWorldSpaceAR(c);return t.convertToNodeSpaceAR(o)})),e._RF.push({},"2e3caZX971JhZmvsg1S+VfW","convertation",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/coreState.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"cabb8OE+fhArpYGb2MqRBUF","coreState",void 0);t("CoreState",function(t){return t[t.IDLE=0]="IDLE",t[t.CLEARING=1]="CLEARING",t[t.FILLING=2]="FILLING",t[t.SHUFFLING=3]="SHUFFLING",t[t.LOSE=4]="LOSE",t[t.WIN=5]="WIN",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/fillCommand.ts",["cc"],(function(i){var t,n;return{setters:[function(i){t=i.cclegacy,n=i.EventTarget}],execute:function(){t._RF.push({},"a6417qGkndB4IFKoQQB+pNH","fillCommand",void 0);var e=i("GRIDVIEW_FILLED_ET",new n);i("FillCommand",function(){function i(i,t){this._viewFiller=void 0,this._fillShifts=void 0,this._viewFiller=i,this._fillShifts=t}return i.prototype.do=function(){return this._viewFiller.fill(this._fillShifts).then((function(){return e.emit(0)}))},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/filler.ts",["cc"],(function(i){var t,e,s;return{setters:[function(i){t=i.cclegacy,e=i.EventTarget,s=i.Vec2}],execute:function(){t._RF.push({},"7f605kgSvNAbYPXfJGzYu3X","filler",void 0);var r=i("FILL_ET",new e);i("Filler",function(){function i(i,t){this._grid=void 0,this._tilesPool=void 0,this._grid=i,this._tilesPool=t}return i.prototype.fill=function(){for(var i=new Map,t=0;t<this._grid.size.x;t++)for(var e=0;e<this._grid.size.y;e++)if(null==this._grid.tiles[t][e]){i.has(t)||i.set(t,[]);for(var l=void 0,o=e+1;o<this._grid.size.y;o++)if(null!=this._grid.tiles[t][o]){l=this._grid.tiles[t][o],this._grid.tiles[t][o]=null;break}null==l&&(l=this._tilesPool.get()).move(s.NEG_ONE),i.get(t).push([l,l.position.y,e]),l.move(new s(t,e)),this._grid.tiles[t][e]=l}return r.emit(0,i),i},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/fillStateResolver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./stateMachine.ts","./coreState.ts","./stateMachine2.ts"],(function(t){var e,i,n,o,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){n=t.StateAction,o=t.AStateResolver},function(t){s=t.CoreState},function(t){c=t.CORE_STATE_SWITCH_ET}],execute:function(){i._RF.push({},"6193atCVW9LLaAxW8UuezYD","fillStateResolver",void 0);t("FillStateResolver",function(t){function i(e,i,n){var o;return(o=t.call(this,c,s.FILLING)||this)._stateMachine=void 0,o._filler=void 0,o._toShuffleEt=void 0,o._stateMachine=e,o._filler=i,o._toShuffleEt=n,o}e(i,t);var o=i.prototype;return o.toggle=function(t){switch(t){case n.ENTER:this.onEnter();break;case n.EXIT:this.onExit()}},o.onEnter=function(){this._toShuffleEt.once(0,this.toShuffling,this),this._filler.fill()},o.onExit=function(){},o.toShuffling=function(){this._stateMachine.switch(s.SHUFFLING)},i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/grid.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,s,o;return{setters:[function(i){t=i.createClass},function(i){s=i.cclegacy,o=i.Vec2}],execute:function(){s._RF.push({},"689552K39pLpJl4acDe5dOo","grid",void 0);i("Grid",function(){function i(i,t,s,e){this._size=void 0,this._minBlastSize=void 0,this._colorVariantsCount=void 0,this._tiles=[],this._size=t,this._minBlastSize=s,this._colorVariantsCount=e;for(var n=0;n<this._size.x;n++){this._tiles.push([]);for(var r=0;r<this._size.y;r++){var u=i.get(),h=new o(n,r);u.move(h),this._tiles[n].push(u)}}}return i.prototype.getTileNeighbors=function(i){var t=[];return i.position.x>0&&t.push(this._tiles[i.position.x-1][i.position.y]),i.position.x<this.size.x-1&&t.push(this._tiles[i.position.x+1][i.position.y]),i.position.y>0&&t.push(this._tiles[i.position.x][i.position.y-1]),i.position.y<this.size.y-1&&t.push(this._tiles[i.position.x][i.position.y+1]),t},t(i,[{key:"size",get:function(){return this._size}},{key:"minBlastSize",get:function(){return this._minBlastSize}},{key:"colorVariantsCount",get:function(){return this._colorVariantsCount}},{key:"tiles",get:function(){return this._tiles}}]),i}());s._RF.pop()}}}));

System.register("chunks:///_virtual/gridEventsInterpreter.ts",["cc","./clearer.ts","./filler.ts","./shuffler.ts","./shuffleCommand.ts","./fillCommand.ts","./clearCommand.ts"],(function(e){var i,t,n,r,d,o,s;return{setters:[function(e){i=e.cclegacy},function(e){t=e.CLEAR_ET},function(e){n=e.FILL_ET},function(e){r=e.SHUFFLE_ET},function(e){d=e.ShuffleCommand},function(e){o=e.FillCommand},function(e){s=e.ClearCommand}],execute:function(){i._RF.push({},"4c3f9818PFDUYsq+NdSBFhT","gridEventsInterpreter",void 0);e("GridEventsInterpreter",function(){function e(e,i,t,n){this._viewClearer=void 0,this._viewFiller=void 0,this._viewShuffler=void 0,this._gridUpdater=void 0,this._viewClearer=e,this._viewFiller=i,this._viewShuffler=t,this._gridUpdater=n}var i=e.prototype;return i.bind=function(){t.on(0,this.addClearCommand,this),n.on(0,this.addFillCommand,this),r.on(0,this.addShuffleCommand,this)},i.expose=function(){t.off(0,this.addClearCommand,this),n.off(0,this.addFillCommand,this),r.off(0,this.addShuffleCommand,this)},i.addClearCommand=function(e){this._gridUpdater.enqueue(new s(this._viewClearer,e))},i.addFillCommand=function(e){this._gridUpdater.enqueue(new o(this._viewFiller,e))},i.addShuffleCommand=function(e){this._gridUpdater.enqueue(new d(this._viewShuffler,e))},e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/gridView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,o,s,n,r,l,a,h,d;return{setters:[function(i){t=i.inheritsLoose,e=i.createForOfIteratorHelperLoose,o=i.createClass},function(i){s=i.cclegacy,n=i._decorator,r=i.UITransform,l=i.Layout,a=i.Vec2,h=i.Size,d=i.Component}],execute:function(){var _;s._RF.push({},"8e926knQYtKT47dSXJskOPX","gridView",void 0);var u=n.ccclass,c=n.requireComponent;i("GridView",u("grid-view")(_=c(r)(_=c(l)(_=function(i){function s(){for(var t,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return(t=i.call.apply(i,[this].concat(o))||this)._transform=void 0,t._layout=void 0,t._grid=void 0,t._tileSlotViewsPool=void 0,t._tileViewsPool=void 0,t._tilesSpawnSlot=void 0,t._tileSlotViews=[],t._initialized=!1,t}t(s,i);var n=s.prototype;return n.onLoad=function(){this._transform=this.node.getComponent(r),this._layout=this.node.getComponent(l)},n.init=function(i,t,e){this._tileSlotViewsPool=i,this._tileViewsPool=t,this._tilesSpawnSlot=e},n.initGrid=function(i){if(!this._initialized){this._grid=i;var t=new a(this._layout.spacingX*this._grid.size.x,this._layout.spacingY*this._grid.size.y),o=this._grid.size.x>this._grid.size.y,s=Math.floor(o?(this._transform.contentSize.x-t.x)/this._grid.size.x:(this._transform.contentSize.y-t.y)/this._grid.size.y),n=new a(t.x+s*this._grid.size.x,t.y+s*this._grid.size.y),r=new a((this._transform.contentSize.x-n.x)/2,(this._transform.contentSize.y-n.y)/2),l=new h(s,s);this._layout.cellSize=l,this._tilesSpawnSlot.transform.contentSize=l,this._layout.paddingLeft=r.x,this._layout.paddingRight=r.x,this._layout.paddingTop=r.y,this._layout.paddingBottom=r.y;for(var d,_=e(this._grid.tiles);!(d=_()).done;){var u=d.value;this._tileSlotViews.push([]);for(var c,g=e(u);!(c=g()).done;){var p=c.value,y=this._tileViewsPool.get();y.setTile(p);var f=this._tileSlotViewsPool.get();this._layout.node.addChild(f.node),f.init(p.position),f.setTileView(y),this._tileSlotViews[p.position.x].push(f)}}this._initialized=!0}},o(s,[{key:"tileSlotViews",get:function(){return this._tileSlotViews}}]),s}(d))||_)||_)||_);s._RF.pop()}}}));

System.register("chunks:///_virtual/gridViewUpdater.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"790deMUQX1Ko6RRyuG+IAEa","gridViewUpdater",void 0);t("GridViewUpdater",function(){function t(){this._commands=[],this._executing=!1}var e=t.prototype;return e.enqueue=function(t){this._commands.push(t),this._commands.length>1||this._executing||this.executeNext()},e.executeNext=function(){0!==this._commands.length?(this._executing=!0,this._commands.shift().do().then(this.executeNext.bind(this))):this._executing=!1},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/iClearBoost.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"e5038XpoO5NXYLKppecStl8","iClearBoost",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/idleStateResolver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./coreState.ts","./stateMachine2.ts","./stateMachine.ts","./tilesSelector.ts"],(function(t){var e,s,o,i,c,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){s=t.cclegacy},function(t){o=t.CoreState},function(t){i=t.CORE_STATE_SWITCH_ET},function(t){c=t.StateAction,n=t.AStateResolver},function(t){r=t.TILE_SELECTED_ET}],execute:function(){s._RF.push({},"74ec4zZ6f5KIYeUKCeVcNIi","idleStateResolver",void 0);t("IdleStateResolver",function(t){function s(e,s,c,n,r,l,h){var a;return(a=t.call(this,i,o.IDLE)||this)._stateMachine=void 0,a._tilesSelector=void 0,a._selector=void 0,a._connected=void 0,a._clearBoostsSelector=void 0,a._score=void 0,a._turns=void 0,a._stateMachine=e,a._tilesSelector=s,a._selector=c,a._connected=n,a._clearBoostsSelector=r,a._score=l,a._turns=h,a}e(s,t);var n=s.prototype;return n.toggle=function(t){switch(t){case c.ENTER:this.onEnter();break;case c.EXIT:this.onExit()}},n.onEnter=function(){!this._connected.hasAnythingConnected()||0==this._turns.left&&this._score.value<this._score.target?this.toLose():this._score.value>=this._score.target?this.toWin():r.once(0,this.toClear,this)},n.onExit=function(){this._clearBoostsSelector.hasBoostSelected||this._turns.countDown()},n.toClear=function(){this._clearBoostsSelector.hasBoostSelected?this._selector.select=this._clearBoostsSelector.boost.fromPoint.bind(this._clearBoostsSelector.boost):this._selector.select=this._connected.fromPoint.bind(this._connected),this._tilesSelector.selectTiles(this._selector.select(this._tilesSelector.positions[0])),this._tilesSelector.positions.length<=1?r.once(0,this.toClear,this):this._stateMachine.switch(o.CLEARING)},n.toLose=function(){this._stateMachine.switch(o.LOSE)},n.toWin=function(){this._stateMachine.switch(o.WIN)},s}(n));s._RF.pop()}}}));

System.register("chunks:///_virtual/loseStateResolver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./stateMachine.ts","./coreState.ts","./stateMachine2.ts"],(function(e){var t,n,o,s,i,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){o=e.StateAction,s=e.AStateResolver},function(e){i=e.CoreState},function(e){c=e.CORE_STATE_SWITCH_ET}],execute:function(){n._RF.push({},"00c58RYyfVDX5X7HcbLqoTm","loseStateResolver",void 0);e("LoseStateResolver",function(e){function n(t){var n;return(n=e.call(this,c,i.LOSE)||this)._winLoseScreensSwitcher=void 0,n._winLoseScreensSwitcher=t,n}t(n,e);var s=n.prototype;return s.toggle=function(e){switch(e){case o.ENTER:this.onEnter();break;case o.EXIT:this.onExit()}},s.onEnter=function(){this._winLoseScreensSwitcher.lose()},s.onExit=function(){},n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./bootstrapper.ts","./coreState.ts","./stateMachine2.ts","./clearStateResolver.ts","./fillStateResolver.ts","./idleStateResolver.ts","./loseStateResolver.ts","./shuffleStateResolver.ts","./winStateResolver.ts","./bomb.ts","./clearBoostsSelector.ts","./iClearBoost.ts","./clearScorer.ts","./clearer.ts","./connected.ts","./filler.ts","./grid.ts","./tileClickInterpreter.ts","./selector.ts","./shuffler.ts","./tile.ts","./tilesSelector.ts","./boostView.ts","./clearBoostsSelectorView.ts","./tilesColorsConfig.ts","./gridView.ts","./tileSlotView.ts","./tileView.ts","./clearCommand.ts","./fillCommand.ts","./shuffleCommand.ts","./gridEventsInterpreter.ts","./gridViewUpdater.ts","./viewClearer.ts","./viewFiller.ts","./viewShuffler.ts","./score.ts","./scoreView.ts","./turns.ts","./turnsView.ts","./winLoseScreensSwitcher.ts","./arrayExt.ts","./bounds.ts","./command.ts","./convertation.ts","./pool.ts","./random.ts","./sceneSwitchButton.ts","./stateMachine.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/pool.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"e3a47UnMJZEuKJ4xR7dW7b/","pool",void 0);t("Pool",function(){function t(t,i,o){this._items=[],this._factory=void 0,this._onGet=void 0,this._onPut=void 0,this._factory=t,this._onGet=i,this._onPut=o}var i=t.prototype;return i.get=function(){0===this._items.length&&this.add();var t=this._items.shift();return this._onGet(t),t},i.put=function(t){this._onPut(t),this._items.push(t)},i.add=function(){this._items.push(this._factory())},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/random.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){n("randomInteger",(function(n,t){return Math.floor(Math.random()*(t-n+1))+n})),t._RF.push({},"daa72lhFgZDj4Zp1bdRIxpZ","random",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/sceneSwitchButton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,c,o,r,s,l,a,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,c=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.EventHandler,l=t.Button,a=t.director,u=t.Component}],execute:function(){var h,d,p;o._RF.push({},"7d5c45E2b9PeplQgdht2Jen","sceneSwitchButton",void 0);var f=r.ccclass,b=r.property;t("SceneSwitchButton",f("scene-switch-button")((p=e((d=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"sceneName",p,c(e)),e.button=void 0,e.clickHandler=new s,e}n(e,t);var o=e.prototype;return o.onLoad=function(){this.button=this.node.getComponent(l),this.clickHandler.target=this.node,this.clickHandler.component="scene-switch-button",this.clickHandler.handler="load"},o.onEnable=function(){this.button.clickEvents.push(this.clickHandler)},o.onDisable=function(){var t=this.button.clickEvents.indexOf(this.clickHandler);this.button.clickEvents.splice(t,1)},o.load=function(){a.loadScene(this.sceneName)},e}(u)).prototype,"sceneName",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=d))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/score.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n;return{setters:[function(t){e=t.createClass},function(t){r=t.cclegacy,n=t.EventTarget}],execute:function(){r._RF.push({},"60c26HQGA5CGZOeGS4bnN2U","score",void 0);var u=t("SCORE_UP_ET",new n);t("Score",function(){function t(t){this._value=0,this._target=void 0,this._target=t}return t.prototype.scoreUp=function(t){t<0||(this._value+=t,u.emit(0,this.value,this.target,t))},e(t,[{key:"value",get:function(){return this._value}},{key:"target",get:function(){return this._target}}]),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/scoreView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./score.ts"],(function(i){var e,t,r,n,o,s,l,c,a,u,p;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,r=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){o=i.cclegacy,s=i._decorator,l=i.Label,c=i.tween,a=i.Vec3,u=i.Component},function(i){p=i.SCORE_UP_ET}],execute:function(){var h,f,w,g,b;o._RF.push({},"44f5cF6AQNIW4QtYsp6J/2P","scoreView",void 0);var d=s.ccclass,_=s.property;i("ScoreView",d("score-view")((w=e((f=function(i){function e(){for(var e,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return e=i.call.apply(i,[this].concat(o))||this,r(e,"growMultiplier",w,n(e)),r(e,"growTime",g,n(e)),r(e,"shrinkTime",b,n(e)),e._label=void 0,e._scoredTween=void 0,e._initialized=!1,e}t(e,i);var o=e.prototype;return o.onLoad=function(){this._label=this.node.getComponent(l),this._scoredTween=c(this.node).to(this.growTime,{scale:new a(this.growMultiplier,this.growMultiplier,this.growMultiplier)}).to(this.shrinkTime,{scale:a.ONE})},o.onEnable=function(){p.on(0,this.scoreUp,this)},o.onDisable=function(){p.off(0,this.scoreUp,this)},o.init=function(i,e){this._initialized||(this._initialized=!0,this.scoreUp(i,e))},o.scoreUp=function(i,e,t){this._label.string=i+"/"+e,this._scoredTween.start(0)},e}(u)).prototype,"growMultiplier",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.3}}),g=e(f.prototype,"growTime",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),b=e(f.prototype,"shrinkTime",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),h=f))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/selector.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,c;return{setters:[function(e){t=e.createClass},function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"175b5sCEiZFO5z71OPFC5kR","selector",void 0);e("Selector",function(){function e(){this._selectFunc=void 0}return t(e,[{key:"select",get:function(){return this._selectFunc},set:function(e){this._selectFunc=e}}]),e}());c._RF.pop()}}}));

System.register("chunks:///_virtual/shuffleCommand.ts",["cc"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy,n=t.EventTarget}],execute:function(){e._RF.push({},"649aboZAEZE/L5DnDeV5Yf/","shuffleCommand",void 0);var i=t("GRIDVIEW_SHUFFLED_ET",new n);t("ShuffleCommand",function(){function t(t,e){this._viewShuffler=void 0,this._oldPositions=void 0,this._viewShuffler=t,this._oldPositions=e}return t.prototype.do=function(){return this._viewShuffler.shuffle(this._oldPositions).then((function(){return i.emit(0)}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/shuffler.ts",["cc","./arrayExt.ts"],(function(i){var t,r,e,s;return{setters:[function(i){t=i.cclegacy,r=i.EventTarget,e=i.Vec2},function(i){s=i.flatten}],execute:function(){t._RF.push({},"21987tyMbNAHJmJ7gZMzYrw","shuffler",void 0);var n=i("SHUFFLE_ET",new r);i("Shuffler",function(){function i(i){this._grid=void 0,this._grid=i}return i.prototype.shuffle=function(){for(var i=s(this._grid.tiles).sort((function(){return Math.random()-.5})),t=[],r=0;r<this._grid.size.x;r++){t.push([]);for(var o=0;o<this._grid.size.y;o++)t[r].push(i[r*this._grid.size.y+o].position)}for(var u=0;u<this._grid.size.x;u++)for(var f=0;f<this._grid.size.y;f++)this._grid.tiles[u][f]=i[u*this._grid.size.y+f],this._grid.tiles[u][f].move(new e(u,f));return n.emit(0,t),t},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/shuffleStateResolver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./stateMachine.ts","./coreState.ts","./stateMachine2.ts"],(function(t){var e,n,o,i,s,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.StateAction,i=t.AStateResolver},function(t){s=t.CoreState},function(t){r=t.CORE_STATE_SWITCH_ET}],execute:function(){n._RF.push({},"b5bfeCwt6ZKSqjRJmD9HcPK","shuffleStateResolver",void 0);t("ShuffleStateResolver",function(t){function n(e,n,o,i,f){var h;return(h=t.call(this,r,s.SHUFFLING)||this)._stateMachine=void 0,h._shuffler=void 0,h._connected=void 0,h._toIdleEt=void 0,h._maxShufflesPerIterationCount=void 0,h._shufflesPerIterationCounter=void 0,h._awaitedShufflesPerIterationCounter=void 0,h._stateMachine=e,h._shuffler=n,h._connected=o,h._toIdleEt=i,h._maxShufflesPerIterationCount=f,h}e(n,t);var i=n.prototype;return i.toggle=function(t){switch(t){case o.ENTER:this.onEnter();break;case o.EXIT:this.onExit()}},i.onEnter=function(){if(this._connected.hasAnythingConnected())this.toIdle();else{this._toIdleEt.on(0,this.shufflingCounter,this);for(var t=0;t<this._maxShufflesPerIterationCount&&!this._connected.hasAnythingConnected();t++)this._shufflesPerIterationCounter++,this._shuffler.shuffle()}},i.onExit=function(){this._toIdleEt.off(0,this.toIdle,this),this._shufflesPerIterationCounter=0,this._awaitedShufflesPerIterationCounter=0},i.shufflingCounter=function(){this._awaitedShufflesPerIterationCounter++,this._awaitedShufflesPerIterationCounter<this._shufflesPerIterationCounter||this.toIdle()},i.toIdle=function(){this._stateMachine.switch(s.IDLE)},n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/stateMachine.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"001d2G8RCBFVKQWybokobNr","stateMachine",void 0);t("StateAction",function(t){return t[t.ENTER=0]="ENTER",t[t.EXIT=1]="EXIT",t}({})),t("AStateResolver",function(){function t(t,e){this._switchEt=void 0,this._targetState=void 0,this._switchEt=t,this._targetState=e}var e=t.prototype;return e.bind=function(){this._switchEt.on(this._targetState,this.toggle,this)},e.expose=function(){this._switchEt.off(this._targetState,this.toggle,this)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/stateMachine2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./stateMachine.ts"],(function(t){var e,n,r,i;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,r=t.EventTarget},function(t){i=t.StateAction}],execute:function(){n._RF.push({},"1186bE8IGtPhLXA2cJBID/Y","stateMachine",void 0);var s=t("CORE_STATE_SWITCH_ET",new r);t("CoreStateMachine",function(){function t(t){this._startState=void 0,this._currentState=null,this._started=!1,this._startState=t}var n=t.prototype;return n.start=function(){this._started||(this._started=!0,this.switch(this._startState))},n.switch=function(t){t!=this._currentState&&null!=t&&(null!=this._currentState&&s.emit(this._currentState,i.EXIT),this._currentState=t,s.emit(this._currentState,i.ENTER))},e(t,[{key:"currentState",get:function(){return this._currentState}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/tile.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,o,n;return{setters:[function(t){i=t.createClass},function(t){o=t.cclegacy,n=t.Vec2}],execute:function(){o._RF.push({},"63d00SOFTFE77VThQw5eH6z","tile",void 0);t("Tile",function(){function t(t,i){void 0===t&&(t=n.ZERO),void 0===i&&(i=0),this._position=void 0,this._color=void 0,this.move(t),this.paint(i)}var o=t.prototype;return o.move=function(t){this._position=t},o.paint=function(t){this._color=t},i(t,[{key:"position",get:function(){return this._position}},{key:"color",get:function(){return this._color}}]),t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/tileClickInterpreter.ts",["cc","./tileView.ts"],(function(t){var e,i;return{setters:[function(t){e=t.cclegacy},function(t){i=t.TILE_CLICK_ET}],execute:function(){e._RF.push({},"322e0fU4YxKfIHi2FL9R5OQ","tileClickInterpreter",void 0);t("TileClickInterpreter",function(){function t(t){this._tileSelector=void 0,this._tileSelector=t}var e=t.prototype;return e.bind=function(){i.on(0,this.interpret,this)},e.expose=function(){i.off(0,this.interpret,this)},e.interpret=function(t){this._tileSelector.selectTiles([t.tile.position])},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/tilesColorsConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,n,r;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,n=e.resources,r=e.SpriteFrame}],execute:function(){o._RF.push({},"5b708xUTt9Gu6Tbidj5YYW5","tilesColorsConfig",void 0);var s=e("TilesColorsConfig",function(){function e(){this._spites=new Map}var o=e.prototype;return o.load=function(e){for(var o,s=this,i=[],u=function(){var e=o.value;i.push(new Promise((function(t,o){n.load(e.path,r,(function(n,r){n?o(n):(s._spites.set(e.code,r),t())}))})))},c=t(e.json.spritePaths);!(o=c()).done;)u();return Promise.all(i)},o.get=function(e){return this._spites.get(e)},e}());e("TILES_COLORS_CONFIG",new s);o._RF.pop()}}}));

System.register("chunks:///_virtual/tileSlotView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./convertation.ts"],(function(t){var i,e,n,o,r,s,l,c,a,u;return{setters:[function(t){i=t.inheritsLoose,e=t.createClass},function(t){n=t.cclegacy,o=t._decorator,r=t.UITransform,s=t.Vec3,l=t.Vec2,c=t.tween,a=t.Component},function(t){u=t.convertLocalToOtherLocal}],execute:function(){var f;n._RF.push({},"c2a98Vd13hLZp9zF1XkZAMu","tileSlotView",void 0);var h=o.ccclass,_=o.requireComponent;t("TileSlotView",h("tile-slot-view")(f=_(r)(f=function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this)._transform=void 0,i._position=l.NEG_ONE,i._tileView=void 0,i._initialized=!1,i}i(n,t);var o=n.prototype;return o.onLoad=function(){this._transform=this.node.getComponent(r)},o.init=function(t){this._initialized||(this._position=t,this._initialized=!0)},o.setTileView=function(t){this._tileView=t,this.node.addChild(this._tileView.node),this._tileView.node.position=s.ZERO},o.clear=function(){var t=this._tileView,i=this._tileView.clear();return this._tileView=null,[i,t]},o.shiftTile=function(t,i){var e=this.tileShiftTween(t,i);return new Promise((function(t){e.call((function(){return t()})).start(0)}))},o.tileShiftTween=function(t,i){var e=this.tileView,n=u(s.ZERO,t.transform,this.transform);if(this.position==l.NEG_ONE){var o=new s(n.x,t.position.y*this._transform.contentSize.y);e.node.setPosition(o)}return c(e.node).to(i,{position:n}).call((function(){t.setTileView(e)}))},e(n,[{key:"transform",get:function(){return this._transform}},{key:"position",get:function(){return this._position}},{key:"tileView",get:function(){return this._tileView}}]),n}(a))||f)||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/tilesSelector.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,s,o;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,i=t.createClass},function(t){s=t.cclegacy,o=t.EventTarget}],execute:function(){s._RF.push({},"6d0faUDwX5BV7wTtXQiMFl2","tilesSelector",void 0);var n=t("TILE_SELECTED_ET",new o),r=t("TILE_DESELECTED_ET",new o);t("TilesSelector",function(){function t(){this._positions=[]}var s=t.prototype;return s.addTile=function(t){this._positions.push(t),n.emit(0)},s.removeTile=function(t){var e=this._positions.indexOf(t);this._positions.splice(e,1),n.emit(0)},s.selectTiles=function(t){this._positions.length=0;for(var i,s=e(t);!(i=s()).done;){var o=i.value;this._positions.push(o)}n.emit(0)},s.deselectTiles=function(){this._positions.length=0,r.emit(0)},i(t,[{key:"hasPositionsSelected",get:function(){return this._positions.length>0}},{key:"positions",get:function(){return this._positions}}]),t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/tileView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./tilesColorsConfig.ts"],(function(e){var t,i,n,r,o,l,c,s,a,u,p,f,h,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createClass},function(e){l=e.cclegacy,c=e._decorator,s=e.EventTarget,a=e.Sprite,u=e.tween,p=e.Vec3,f=e.Node,h=e.Component},function(e){_=e.TILES_COLORS_CONFIG}],execute:function(){var T,d,y,v,w,g;l._RF.push({},"7814dsyvPdDk5nKzIWRFho6","tileView",void 0);var E=c.ccclass,m=c.property,C=e("TILE_CLICK_ET",new s);e("TileView",(T=E("tile-view"),d=m({type:a}),T((w=t((v=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,n(t,"sprite",w,r(t)),n(t,"scaleTime",g,r(t)),t._tile=void 0,t._clearTween=u(t.node).to(t.scaleTime,{scale:p.ZERO}),t}i(t,e);var l=t.prototype;return l.onLoad=function(){this._clearTween.target(this.sprite.node)},l.onEnable=function(){this.sprite.node.scale=p.ONE,this.node.on(f.EventType.TOUCH_END,this.click,this)},l.onDisable=function(){this.node.off(f.EventType.TOUCH_END,this.click,this)},l.clear=function(){var e=this;return new Promise((function(t){e._clearTween.clone().call((function(){return t()})).start(0),e._tile=null}))},l.setTile=function(e){this._tile=e,this.sprite.spriteFrame=_.get(this._tile.color)},l.click=function(){C.emit(0,this)},o(t,[{key:"tile",get:function(){return this._tile}}]),t}(h)).prototype,"sprite",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(v.prototype,"scaleTime",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),y=v))||y));l._RF.pop()}}}));

System.register("chunks:///_virtual/turns.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,u;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,u=t.EventTarget}],execute:function(){n._RF.push({},"153c8Nn40JAG4cydxSN6WXt","turns",void 0);var r=t("TURNS_DOWN_ET",new u);t("Turns",function(){function t(t){this._left=void 0,this._left=t}return t.prototype.countDown=function(){this._left--,r.emit(0,this._left)},e(t,[{key:"left",get:function(){return this._left}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/turnsView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./turns.ts"],(function(i){var t,n,e,r,o,s,l,u,a,c,h;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,e=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){o=i.cclegacy,s=i._decorator,l=i.Label,u=i.tween,a=i.Vec3,c=i.Component},function(i){h=i.TURNS_DOWN_ET}],execute:function(){var p,w,f,d,b;o._RF.push({},"2d69cAzF/9AS5/TvC6eGp8n","turnsView",void 0);var _=s.ccclass,T=s.property;i("TurnsView",_("turns-view")((f=t((w=function(i){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=i.call.apply(i,[this].concat(o))||this,e(t,"shrinkMultiplier",f,r(t)),e(t,"shrinkTime",d,r(t)),e(t,"growTime",b,r(t)),t._label=void 0,t._downTween=void 0,t._initialized=!1,t}n(t,i);var o=t.prototype;return o.onLoad=function(){this._label=this.node.getComponent(l),this._downTween=u(this.node).to(this.shrinkTime,{scale:new a(this.shrinkMultiplier,this.shrinkMultiplier,this.shrinkMultiplier)}).to(this.growTime,{scale:a.ONE})},o.onEnable=function(){h.on(0,this.turnsDown,this)},o.onDisable=function(){h.off(0,this.turnsDown,this)},o.init=function(i){this._initialized||(this._initialized=!0,this.turnsDown(i))},o.turnsDown=function(i){this._label.string=i.toString(),this._downTween.start(0)},t}(c)).prototype,"shrinkMultiplier",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.7}}),d=t(w.prototype,"shrinkTime",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),b=t(w.prototype,"growTime",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),p=w))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/viewClearer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t;return{setters:[function(e){i=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"e72cd64j+ZMIoun4gFro2uh","viewClearer",void 0);e("ViewClearer",function(){function e(e,i){this._gridView=void 0,this._tileViewsPool=void 0,this._gridView=e,this._tileViewsPool=i}return e.prototype.clear=function(e){for(var t,r=this,o=[],n=function(){var e=t.value,i=r._gridView.tileSlotViews[e.x][e.y].clear(),n=i[0],u=i[1];o.push(n.then((function(){return r._tileViewsPool.put(u)})))},u=i(e);!(t=u()).done;)n();return Promise.all(o).then((function(){}))},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/viewFiller.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t;return{setters:[function(i){e=i.createForOfIteratorHelperLoose},function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"fd90adEnVFK8okMPxnBXkeV","viewFiller",void 0);i("ViewFiller",function(){function i(i,e,t,l){this._gridView=void 0,this._tileViewsPool=void 0,this._tilesSpawnSlot=void 0,this._fallShiftTime=void 0,this._gridView=i,this._tileViewsPool=e,this._tilesSpawnSlot=t,this._fallShiftTime=l}return i.prototype.fill=function(i){var t=this,l=[];return i.forEach((function(i,o){for(var r,s=e(i);!(r=s()).done;){var n=r.value,f=void 0;if(-1==n[1]){var a=t._tileViewsPool.get();a.setTile(n[0]),(f=t._tilesSpawnSlot).setTileView(a)}else f=t._gridView.tileSlotViews[o][n[1]];var u=t._gridView.tileSlotViews[o][n[2]];l.push(f.shiftTile(u,t._fallShiftTime))}})),Promise.all(l).then((function(){}))},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/viewShuffler.ts",["cc"],(function(i){var e;return{setters:[function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"4c7bblu2CtBxKY6MtVmWfPm","viewShuffler",void 0);i("ViewShuffler",function(){function i(i,e){this._gridView=void 0,this._shuffleShiftTime=void 0,this._gridView=i,this._shuffleShiftTime=e}return i.prototype.shuffle=function(i){for(var e=[],t=0;t<i.length;t++)for(var f=0;f<i[t].length;f++){var r=this._gridView.tileSlotViews[i[t][f].x][i[t][f].y];e.push(r.shiftTile(this._gridView.tileSlotViews[t][f],this._shuffleShiftTime))}return Promise.all(e).then((function(){}))},i}());e._RF.pop()}}}));

System.register("chunks:///_virtual/winLoseScreensSwitcher.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,i,n,t,c,o,a,l;return{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){c=e.cclegacy,o=e._decorator,a=e.Node,l=e.Component}],execute:function(){var s,u,p,S,h,w,f,y,g;c._RF.push({},"e8f27WEU+tGrJjgYjoMAVvC","winLoseScreensSwitcher",void 0);var v=o.ccclass,b=o.property;e("WinLoseScreensSwitcher",(s=v("win-lose-screens-switcher"),u=b({type:a}),p=b({type:a}),S=b({type:a}),s((f=r((w=function(e){function r(){for(var r,i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];return r=e.call.apply(e,[this].concat(c))||this,n(r,"gameScreen",f,t(r)),n(r,"loseScreen",y,t(r)),n(r,"winScreen",g,t(r)),r}i(r,e);var c=r.prototype;return c.lose=function(){this.gameScreen.active=!1,this.loseScreen.active=!0},c.win=function(){this.gameScreen.active=!1,this.winScreen.active=!0},r}(l)).prototype,"gameScreen",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=r(w.prototype,"loseScreen",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=r(w.prototype,"winScreen",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=w))||h));c._RF.pop()}}}));

System.register("chunks:///_virtual/winStateResolver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./stateMachine.ts","./coreState.ts","./stateMachine2.ts"],(function(t){var e,n,i,o,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.StateAction,o=t.AStateResolver},function(t){s=t.CoreState},function(t){c=t.CORE_STATE_SWITCH_ET}],execute:function(){n._RF.push({},"81dee1tnuNLgqI07yfhjtDK","winStateResolver",void 0);t("WinStateResolver",function(t){function n(e){var n;return(n=t.call(this,c,s.WIN)||this)._winLoseScreensSwitcher=void 0,n._winLoseScreensSwitcher=e,n}e(n,t);var o=n.prototype;return o.toggle=function(t){switch(t){case i.ENTER:this.onEnter();break;case i.EXIT:this.onExit()}},o.onEnter=function(){this._winLoseScreensSwitcher.win()},o.onExit=function(){},n}(o));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});